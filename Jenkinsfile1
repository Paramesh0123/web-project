pipeline {
    agent any // Or specify a specific agent label

    stages {
        stage('Build') {
            steps {
                echo 'Starting the build stage...'
                sh 'mvn clean package'
                
                echo 'Build stage completed.'
            }
        }

        stage('Test') {
            steps {
                echo 'Starting the test stage...'
                sh 'mvn test'
                // Publish test results (if applicable)
                junit '**/target/surefire-reports/TEST-*.xml'
                echo 'Test stage completed.'
            }
            post {
                failure {
                    echo 'Tests failed. Please check the test reports.'
                    // You might want to send notifications or take other actions on test failure
                }
            }
        }
    }
}
